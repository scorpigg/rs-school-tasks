(()=>{"use strict";var e={812:(e,t,n)=>{n.r(t)},203:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getWinner=t.createWinner=t.getWinners=t.deleteCar=t.remakeCar=t.createCar=t.getCar=t.getCars=t.drive=t.stopEngine=t.startEngine=void 0;const r="http://127.0.0.1:3000";t.startEngine=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}/engine?id=${e}&status=started`);return yield t.json()})),t.stopEngine=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}/engine?id=${e}&status=stopped`);return yield t.json()})),t.drive=e=>n(void 0,void 0,void 0,(function*(){return(yield fetch(`${r}/engine?id=${e}&status=drive`).catch()).status})),t.getCars=(e,t=7)=>n(void 0,void 0,void 0,(function*(){const n=yield fetch(`${r}/garage?_page=${e}&_limit=${t}`);return{cars:yield n.json(),count:n.headers.get("X-Total-Count")}})),t.getCar=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}/garage/${e}`);return yield t.json()})),t.createCar=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}/garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),t.remakeCar=(e,t)=>n(void 0,void 0,void 0,(function*(){const n=yield fetch(`${r}/garage/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),t.deleteCar=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}/garage/${e}`,{method:"DELETE"});return yield t.json()})),t.getWinners=(e,a=10)=>n(void 0,void 0,void 0,(function*(){const i=yield fetch(`${r}/winners?_page=${e}&_limit=${a}`),s=yield i.json();return{winners:yield Promise.all(s.map((e=>n(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{car:yield t.getCar(e.id)})}))))),count:i.headers.get("X-Total-Count")}})),t.createWinner=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),t.getWinner=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}/winners/${e}`);return yield t.json()}))},752:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(377);t.App=class{constructor(e){this.parentNode=e,this.switcher=new r.Switcher(e)}}},694:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Render=void 0,t.Render=class{constructor(e,t="div",n=[],r){this.element=document.createElement(t),this.element.classList.add(...n),r&&(this.element.innerText=r),e&&e.appendChild(this.element)}}},140:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Content=void 0;const r=n(785),a=n(694);class i extends a.Render{constructor(e){super(e,"div",["content"],""),new r.Garage(this.element)}}t.Content=i},578:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarAdditional=void 0;const r=n(402),a=n(694);class i extends a.Render{constructor(e){super(e,"div",["form-container"],""),this.additionalBtns=[{className:"race",disabled:"",text:"Race"},{className:"reset",disabled:"disabled",text:"Reset"},{className:"generate-cars",disabled:"",text:"Generate cars"}],this.addBtns(this.additionalBtns);const t=this.element.querySelector(".generate-cars"),n=this.element.querySelector(".race"),a=this.element.querySelector(".reset");t.addEventListener("click",r.generateCars),n.addEventListener("click",(e=>{r.race(e,!0),a.classList.remove("disabled")})),a.addEventListener("click",(e=>{r.race(e,!1),n.classList.remove("disabled")}))}addBtns(e){e.forEach((e=>{this.btn=new a.Render(this.element,"button",[`${e.className}`],`${e.text}`),this.btn.element.setAttribute("type","button"),e.disabled&&this.btn.element.classList.add(`${e.disabled}`)}))}}t.CarAdditional=i},445:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarCreate=void 0;const r=n(402),a=n(694);class i extends a.Render{constructor(e){super(e,"div",["form-container"],""),this.carName=new a.Render(this.element,"input",["car-create__name"],""),this.carName.element.setAttribute("type","text"),this.carName.element.setAttribute("placeholder","Enter car name"),this.carColor=new a.Render(this.element,"input",["car-create__color"],""),this.carColor.element.setAttribute("type","color"),this.carCreateBtn=new a.Render(this.element,"button",["car-create__btn"],"Create"),this.carCreateBtn.element.setAttribute("type","button"),this.carCreateBtn.element.addEventListener("click",r.addCar),r.saveCarNameFieldState(),r.saveCarColorFieldState()}}t.CarCreate=i},599:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarForm=void 0;const r=n(694),a=n(578),i=n(445),s=n(877);class o extends r.Render{constructor(e){super(e,"form",["car-form"],""),this.carCreate=new i.CarCreate(this.element),this.carUpdate=new s.CarUpdate(this.element),this.carAdditional=new a.CarAdditional(this.element)}}t.CarForm=o},877:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarUpdate=void 0;const r=n(402),a=n(694);class i extends a.Render{constructor(e){super(e,"div",["form-container"],""),this.carName=new a.Render(this.element,"input",["car-update__name","disabled"],""),this.carName.element.setAttribute("type","text"),this.carName.element.setAttribute("placeholder","Enter car name"),this.carColor=new a.Render(this.element,"input",["car-update__color","disabled"],""),this.carColor.element.setAttribute("type","color"),this.carUpdateBtn=new a.Render(this.element,"button",["car-update__btn","disabled"],"Update"),this.carUpdateBtn.element.setAttribute("type","button"),this.carUpdateBtn.element.addEventListener("click",(()=>{const e=this.carUpdateBtn.element;r.updateCar(Number(e.dataset.id)),this.carName.element.classList.add("disabled"),this.carColor.element.classList.add("disabled"),this.carUpdateBtn.element.classList.add("disabled")}))}}t.CarUpdate=i},176:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarsField=void 0;const r=n(402),a=n(694);class i extends a.Render{constructor(e){super(e,"div",["cars-field"],""),r.renderCars()}}t.CarsField=i},841:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarsPagination=void 0;const r=n(402),a=n(694);class i extends a.Render{constructor(e){super(e,"div",["cars-pagination"],""),this.prevBtn=new a.Render(this.element,"button",["prev-btn"],"Prev"),this.nextBtn=new a.Render(this.element,"button",["next-btn"],"Next"),this.nextBtn.element.addEventListener("click",(()=>{r.nextCarsPage()})),this.prevBtn.element.addEventListener("click",(()=>{r.prevCarsPage()}))}}t.CarsPagination=i},221:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarDrive=void 0;const r=n(694);class a extends r.Render{constructor(e,t){super(e,"div",["car-drive"],""),this.startBtn=new r.Render(this.element,"button",["start-btn"],"Start"),this.stopBtn=new r.Render(this.element,"button",["stop-btn","disabled"],"Stop"),this.carImg=new r.Render(this.element,"picture",["car-img"],""),this.finishImg=new r.Render(this.element,"img",["finish-img"],""),this.finishImg.element.setAttribute("src","./finish.png"),this.carImg.element.innerHTML=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="80px" height="45px" viewBox="30 0 260.018 217.017">\n       <path fill="${t}" d="M317.833,197.111c3.346-11.148,2.455-20.541-2.65-27.945c-9.715-14.064-31.308-15.864-35.43-16.076l-8.077-4.352\n         l-0.528-0.217c-8.969-2.561-42.745-3.591-47.805-3.733c-7.979-3.936-14.607-7.62-20.475-10.879\n         c-20.536-11.413-34.107-18.958-72.959-18.958c-47.049,0-85.447,20.395-90.597,23.25c-2.812,0.212-5.297,0.404-7.646,0.59\n         l-6.455-8.733l7.34,0.774c2.91,0.306,4.267-1.243,3.031-3.459c-1.24-2.216-4.603-4.262-7.519-4.57l-23.951-2.524\n         c-2.91-0.305-4.267,1.243-3.026,3.459c1.24,2.216,4.603,4.262,7.519,4.57l3.679,0.386l8.166,11.05\n         c-13.823,1.315-13.823,2.139-13.823,4.371c0,18.331-2.343,22.556-2.832,23.369L0,164.443v19.019l2.248,2.89\n         c-0.088,2.775,0.823,5.323,2.674,7.431c5.981,6.804,19.713,7.001,21.256,7.001c4.634,0,14.211-2.366,20.78-4.153\n         c-0.456-0.781-0.927-1.553-1.3-2.392c-0.36-0.809-0.603-1.668-0.885-2.517c-0.811-2.485-1.362-5.096-1.362-7.845\n         c0-14.074,11.449-25.516,25.515-25.516s25.52,11.446,25.52,25.521c0,6.068-2.221,11.578-5.773,15.964\n         c-0.753,0.927-1.527,1.828-2.397,2.641c-1.022,0.958-2.089,1.859-3.254,2.641c29.332,0.109,112.164,0.514,168.708,1.771\n         c-0.828-0.823-1.533-1.771-2.237-2.703c-0.652-0.854-1.222-1.75-1.761-2.688c-2.164-3.744-3.5-8.025-3.5-12.655\n         c0-14.069,11.454-25.513,25.518-25.513c14.064,0,25.518,11.449,25.518,25.513c0,5.126-1.553,9.875-4.152,13.878\n         c-0.605,0.922-1.326,1.755-2.04,2.594c-0.782,0.922-1.616,1.781-2.527,2.584c5.209,0.155,9.699,0.232,13.546,0.232\n         c19.563,0,23.385-1.688,23.861-5.018C324.114,202.108,324.472,199.602,317.833,197.111z"/>\n       <path fill="${t}" d="M52.17,195.175c3.638,5.379,9.794,8.922,16.756,8.922c0.228,0,0.44-0.062,0.663-0.073c2.576-0.083,5.043-0.61,7.291-1.574\n         c1.574-0.678,2.996-1.6,4.332-2.636c4.782-3.702,7.927-9.429,7.927-15.933c0-11.144-9.066-20.216-20.212-20.216\n         s-20.213,9.072-20.213,20.216c0,2.263,0.461,4.411,1.149,6.446c0.288,0.85,0.616,1.673,1.015,2.471\n         C51.279,193.606,51.667,194.434,52.17,195.175z"/>\n       <path fill="${t}" d="M269.755,209.068c2.656,0,5.173-0.549,7.503-1.481c1.589-0.642,3.06-1.491,4.422-2.495\n         c1.035-0.767,1.988-1.616,2.863-2.559c3.34-3.604,5.432-8.389,5.432-13.681c0-11.144-9.071-20.21-20.215-20.21\n         s-20.216,9.066-20.216,20.21c0,4.878,1.812,9.3,4.702,12.801c0.818,0.989,1.719,1.89,2.708,2.713\n         c1.311,1.088,2.729,2.024,4.293,2.755C263.836,208.333,266.704,209.068,269.755,209.068z"/>\n     </svg>`}}t.CarDrive=a},910:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarHandle=void 0;const r=n(694);class a extends r.Render{constructor(e,t){super(e,"div",["car-handle"],""),this.selectBtn=new r.Render(this.element,"button",["select-btn"],"Select"),this.removeBtn=new r.Render(this.element,"button",["remove-btn"],"Remove"),this.carName=new r.Render(this.element,"span",["car-name"],t)}}t.CarHandle=a},341:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldCar=void 0;const r=n(694),a=n(221),i=n(910);class s extends r.Render{constructor(e,t,n){super(e,"div",["field__car"],""),this.carHandle=new i.CarHandle(this.element,t),this.carDrive=new a.CarDrive(this.element,n)}}t.FieldCar=s},785:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const r=n(694),a=n(599),i=n(176),s=n(841);class o extends r.Render{constructor(e){super(e,"div",["garage"],""),this.carForm=new a.CarForm(this.element),this.carsField=new i.CarsField(this.element),this.carsPagination=new s.CarsPagination(this.element)}}t.Garage=o},377:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Switcher=void 0;const r=n(140),a=n(785),i=n(694),s=n(287);class o extends i.Render{constructor(e){super(e,"div",["switcher"],""),this.garageBtn=new i.Render(this.element,"button",["garage-btn"],"To Garage"),this.winnersBtn=new i.Render(this.element,"button",["winners-btn"],"To winners"),this.content=new r.Content(e),this.garageBtn.element.addEventListener("click",(()=>{this.content.element.innerHTML="",new a.Garage(this.content.element)})),this.winnersBtn.element.addEventListener("click",(()=>{this.content.element.innerHTML="",new s.Winners(this.content.element)}))}}t.Switcher=o},39:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersPagination=void 0;const r=n(224),a=n(694);class i extends a.Render{constructor(e){super(e,"div",["cars-pagination"],""),this.prevBtn=new a.Render(this.element,"button",["prev-btn"],"Prev"),this.nextBtn=new a.Render(this.element,"button",["next-btn"],"Next"),this.nextBtn.element.addEventListener("click",(()=>{r.nextWinnersPage()})),this.prevBtn.element.addEventListener("click",(()=>{r.prevWinnersPage()}))}}t.WinnersPagination=i},80:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TableRow=void 0;const r=n(694);class a extends r.Render{constructor(e,t){super(e,"tr",["table__row"],""),Object.values(t).forEach((e=>{this.td=new r.Render(this.element,"td",["table__data"],e),"#"===e[0]&&(this.td.element.innerHTML=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="80px" height="35px" viewBox="30 30 260.018 217.017">\n       <path fill="${e}" d="M317.833,197.111c3.346-11.148,2.455-20.541-2.65-27.945c-9.715-14.064-31.308-15.864-35.43-16.076l-8.077-4.352\n         l-0.528-0.217c-8.969-2.561-42.745-3.591-47.805-3.733c-7.979-3.936-14.607-7.62-20.475-10.879\n         c-20.536-11.413-34.107-18.958-72.959-18.958c-47.049,0-85.447,20.395-90.597,23.25c-2.812,0.212-5.297,0.404-7.646,0.59\n         l-6.455-8.733l7.34,0.774c2.91,0.306,4.267-1.243,3.031-3.459c-1.24-2.216-4.603-4.262-7.519-4.57l-23.951-2.524\n         c-2.91-0.305-4.267,1.243-3.026,3.459c1.24,2.216,4.603,4.262,7.519,4.57l3.679,0.386l8.166,11.05\n         c-13.823,1.315-13.823,2.139-13.823,4.371c0,18.331-2.343,22.556-2.832,23.369L0,164.443v19.019l2.248,2.89\n         c-0.088,2.775,0.823,5.323,2.674,7.431c5.981,6.804,19.713,7.001,21.256,7.001c4.634,0,14.211-2.366,20.78-4.153\n         c-0.456-0.781-0.927-1.553-1.3-2.392c-0.36-0.809-0.603-1.668-0.885-2.517c-0.811-2.485-1.362-5.096-1.362-7.845\n         c0-14.074,11.449-25.516,25.515-25.516s25.52,11.446,25.52,25.521c0,6.068-2.221,11.578-5.773,15.964\n         c-0.753,0.927-1.527,1.828-2.397,2.641c-1.022,0.958-2.089,1.859-3.254,2.641c29.332,0.109,112.164,0.514,168.708,1.771\n         c-0.828-0.823-1.533-1.771-2.237-2.703c-0.652-0.854-1.222-1.75-1.761-2.688c-2.164-3.744-3.5-8.025-3.5-12.655\n         c0-14.069,11.454-25.513,25.518-25.513c14.064,0,25.518,11.449,25.518,25.513c0,5.126-1.553,9.875-4.152,13.878\n         c-0.605,0.922-1.326,1.755-2.04,2.594c-0.782,0.922-1.616,1.781-2.527,2.584c5.209,0.155,9.699,0.232,13.546,0.232\n         c19.563,0,23.385-1.688,23.861-5.018C324.114,202.108,324.472,199.602,317.833,197.111z"/>\n       <path fill="${e}" d="M52.17,195.175c3.638,5.379,9.794,8.922,16.756,8.922c0.228,0,0.44-0.062,0.663-0.073c2.576-0.083,5.043-0.61,7.291-1.574\n         c1.574-0.678,2.996-1.6,4.332-2.636c4.782-3.702,7.927-9.429,7.927-15.933c0-11.144-9.066-20.216-20.212-20.216\n         s-20.213,9.072-20.213,20.216c0,2.263,0.461,4.411,1.149,6.446c0.288,0.85,0.616,1.673,1.015,2.471\n         C51.279,193.606,51.667,194.434,52.17,195.175z"/>\n       <path fill="${e}" d="M269.755,209.068c2.656,0,5.173-0.549,7.503-1.481c1.589-0.642,3.06-1.491,4.422-2.495\n         c1.035-0.767,1.988-1.616,2.863-2.559c3.34-3.604,5.432-8.389,5.432-13.681c0-11.144-9.071-20.21-20.215-20.21\n         s-20.216,9.066-20.216,20.21c0,4.878,1.812,9.3,4.702,12.801c0.818,0.989,1.719,1.89,2.708,2.713\n         c1.311,1.088,2.729,2.024,4.293,2.755C263.836,208.333,266.704,209.068,269.755,209.068z"/>\n      </svg>`)}))}}t.TableRow=a},622:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersTable=void 0;const r=n(694);class a extends r.Render{constructor(e){super(e,"table",["winners__table"],""),this.tableHeaders=["Number","Car","Name","Wins","Best time(seconds)"],this.tableHead=new r.Render(this.element,"thead",["table__head"],""),this.addTableHead()}addTableHead(){this.tableHeaders.forEach((e=>{this.tableHeader=new r.Render(this.tableHead.element,"th",["table__head"],e)}))}}t.WinnersTable=a},287:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0;const r=n(224),a=n(694),i=n(39);class s extends a.Render{constructor(e){super(e,"div",["winners"],""),this.winnersContainer=new a.Render(this.element,"div",["winners-container"],""),this.winnersPagination=new i.WinnersPagination(this.element),r.renderWinners().catch((()=>console.log("No winners")))}}t.Winners=s},402:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveCarColorFieldState=t.saveCarNameFieldState=t.generateCars=t.addCar=t.updateCar=t.prevCarsPage=t.nextCarsPage=t.renderCars=t.race=void 0;const i=n(203),s=n(341),o=n(694),c=a(n(94));function d(e){const{top:t,left:n,width:r,height:a}=e.getBoundingClientRect();return{x:n+r/2,y:t+a/2}}const l=(e,t)=>{const n=e.querySelector(".car-img"),a=e.querySelector(".finish-img"),s=Math.ceil(function(e,t){const n=d(e),r=d(t);return Math.hypot(n.x-r.x,n.y-r.y)}(n,a))+50;i.startEngine(Number(e.dataset.id)).then((a=>r(void 0,void 0,void 0,(function*(){var r;if(a){t.target.classList.add("disabled"),null===(r=e.querySelector(".stop-btn"))||void 0===r||r.classList.remove("disabled");const o=Math.round(a.distance/a.velocity);((e,t,n)=>{(({duration:e,draw:t,timing:n})=>{const r=performance.now();requestAnimationFrame((function a(i){let s=(i-r)/e;s>1&&(s=1);const o=n(s);t(o),s<1&&(c.default.animationRequest=requestAnimationFrame(a))}))})({duration:t,timing:e=>e,draw(t){e.style.transform=`translateX(${Math.min(t*n)}px)`}})})(n,o,s),500===(yield i.drive(Number(e.dataset.id)))&&cancelAnimationFrame(c.default.animationRequest)}}))))},u=(e,t)=>{const n=e.querySelector(".car-img");i.stopEngine(Number(e.dataset.id)).then((r=>{var a;r&&(t.target.classList.add("disabled"),null===(a=e.querySelector(".start-btn"))||void 0===a||a.classList.remove("disabled"),cancelAnimationFrame(c.default.animationRequest),n.style.transform=`translateX(${r.velocity}px)`)}))};t.race=(e,t)=>r(void 0,void 0,void 0,(function*(){document.querySelectorAll(".field__car").forEach((n=>{var r,a;t?(l(n,e),null===(r=n.querySelector(".start-btn"))||void 0===r||r.classList.add("disabled")):(u(n,e),null===(a=n.querySelector(".stop-btn"))||void 0===a||a.classList.add("disabled"))}))})),t.renderCars=()=>r(void 0,void 0,void 0,(function*(){const e=document.querySelector(".cars-field"),{cars:n,count:a}=yield i.getCars(c.default.carsPage);e.innerHTML="",new o.Render(e,"h2",["field__title"],`Garage(${a})`),new o.Render(e,"p",["field__page"],`Page #${c.default.carsPage}`),n.forEach((t=>{new s.FieldCar(e,`${t.name}`,`${t.color}`).element.setAttribute("data-id",`${t.id}`)})),document.querySelectorAll(".field__car").forEach((e=>{e.addEventListener("click",(n=>{var a;n.target.classList.contains("remove-btn")&&i.deleteCar(Number(e.dataset.id)).then(t.renderCars),n.target.classList.contains("select-btn")&&(a=Number(e.dataset.id),r(void 0,void 0,void 0,(function*(){const e=document.querySelector(".car-update__name"),t=document.querySelector(".car-update__color"),n=document.querySelector(".car-update__btn");e.classList.remove("disabled"),t.classList.remove("disabled"),n.classList.remove("disabled"),n.dataset.id=a.toString();const r=yield i.getCar(a);e.value=r.name,t.value=r.color}))),n.target.classList.contains("start-btn")&&l(e,n),n.target.classList.contains("stop-btn")&&u(e,n)}))}))})),t.nextCarsPage=()=>r(void 0,void 0,void 0,(function*(){const{count:e}=yield i.getCars(c.default.carsPage),n=Math.ceil(Number(e)/7);c.default.carsPage<n&&(c.default.carsPage++,yield t.renderCars())})),t.prevCarsPage=()=>r(void 0,void 0,void 0,(function*(){c.default.carsPage>1&&(c.default.carsPage--,yield t.renderCars())})),t.updateCar=e=>r(void 0,void 0,void 0,(function*(){const n=document.querySelector(".car-update__name"),r=document.querySelector(".car-update__color");yield i.remakeCar(e,{name:n.value,color:r.value}),n.value="",r.value="#000000",yield t.renderCars()})),t.addCar=()=>r(void 0,void 0,void 0,(function*(){const e=document.querySelector(".car-create__name"),n=document.querySelector(".car-create__color");yield i.createCar({name:e.value,color:n.value}),e.value="",n.value="#000000",yield t.renderCars()}));const v=["Tesla","Mersedes","BMW","Toyota","Kia","Moskvich","Audi","Volkswagen","Nissan","Lada"],h=["Model S","x6","7","Rav4","Rio","Vesta","412","Q7","Tiguan","Qashqai"],m=()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};t.generateCars=()=>r(void 0,void 0,void 0,(function*(){((e=100)=>new Array(e).fill(1).map((()=>({name:`${v[Math.floor(Math.random()*v.length)]} ${h[Math.floor(Math.random()*h.length)]}`,color:m()}))))().forEach((e=>{i.createCar({name:e.name,color:e.color})})),yield t.renderCars()})),t.saveCarNameFieldState=()=>{const e=document.querySelector(".car-create__name");null==e||e.addEventListener("input",(()=>{c.default.carName=e.value})),e.value=c.default.carName},t.saveCarColorFieldState=()=>{const e=document.querySelector(".car-create__color");null==e||e.addEventListener("change",(()=>{c.default.carColor=e.value})),e.value=c.default.carColor}},94:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={carsPage:1,winnersPage:1,animationRequest:0,carName:"",carColor:""}},224:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.prevWinnersPage=t.nextWinnersPage=t.renderWinners=void 0;const i=n(203),s=n(694),o=n(80),c=n(622),d=a(n(94));t.renderWinners=()=>r(void 0,void 0,void 0,(function*(){const e=document.querySelector(".winners-container"),{winners:t,count:n}=yield i.getWinners(d.default.winnersPage);e.innerHTML="",new s.Render(e,"h2",["winners__title"],`Winners(${n})`),new s.Render(e,"p",["winners__page"],`Page #${d.default.winnersPage}`);const r=new c.WinnersTable(e);t.forEach((e=>{new o.TableRow(r.element,{id:e.id,color:e.car.color,name:e.car.name,wins:e.wins,bestTime:e.time})}))})),t.nextWinnersPage=()=>r(void 0,void 0,void 0,(function*(){const{count:e}=yield i.getWinners(d.default.winnersPage),n=Math.ceil(Number(e)/7);d.default.winnersPage<n&&(d.default.winnersPage++,yield t.renderWinners())})),t.prevWinnersPage=()=>r(void 0,void 0,void 0,(function*(){d.default.winnersPage>1&&(d.default.winnersPage--,yield t.renderWinners())}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(812);const e=n(752);window.addEventListener("load",(()=>{new e.App(document.body)}))})()})();